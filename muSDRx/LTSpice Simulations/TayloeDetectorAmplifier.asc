Version 4
SHEET 1 3200 1748
WIRE 1008 -224 912 -224
WIRE 1200 -224 1072 -224
WIRE 1824 -208 1712 -208
WIRE 1824 -160 1824 -208
WIRE 912 -128 912 -224
WIRE 1008 -128 912 -128
WIRE 1200 -128 1200 -224
WIRE 1200 -128 1088 -128
WIRE 1712 -112 1712 -208
WIRE 208 -64 160 -64
WIRE 400 -64 288 -64
WIRE 496 -64 400 -64
WIRE -272 -48 -352 -48
WIRE 16 -48 -192 -48
WIRE 1824 -48 1824 -80
WIRE 400 -32 400 -64
WIRE -96 0 -208 0
WIRE 496 0 496 -64
WIRE 800 0 496 0
WIRE 912 0 912 -128
WIRE 912 0 880 0
WIRE 976 0 912 0
WIRE 976 16 976 0
WIRE 1008 16 976 16
WIRE 1200 32 1200 -128
WIRE 1200 32 1072 32
WIRE 1440 32 1200 32
WIRE 1712 32 1712 -32
WIRE 1712 32 1504 32
WIRE 400 48 400 32
WIRE 1008 48 976 48
WIRE -352 64 -352 -48
WIRE -272 64 -352 64
WIRE 16 64 -192 64
WIRE 800 64 496 64
WIRE 976 64 976 48
WIRE 976 64 880 64
WIRE 1712 64 1712 32
WIRE 1040 96 1040 64
WIRE -96 112 -208 112
WIRE 1232 112 1136 112
WIRE 1424 112 1296 112
WIRE -528 128 -704 128
WIRE -352 128 -352 64
WIRE -352 128 -448 128
WIRE 208 128 160 128
WIRE 400 128 288 128
WIRE 496 128 496 64
WIRE 496 128 400 128
WIRE -704 144 -704 128
WIRE 400 160 400 128
WIRE -352 176 -352 128
WIRE -272 176 -352 176
WIRE 16 176 -192 176
WIRE 1712 176 1712 144
WIRE 1824 176 1712 176
WIRE 1872 176 1824 176
WIRE 1968 176 1872 176
WIRE 2112 176 2048 176
WIRE 1136 192 1136 112
WIRE 1232 192 1136 192
WIRE 1424 192 1424 112
WIRE 1424 192 1312 192
WIRE -96 224 -208 224
WIRE 400 240 400 224
WIRE 1712 240 1712 176
WIRE 688 256 544 256
WIRE 880 256 768 256
WIRE 976 256 880 256
WIRE 1872 272 1872 240
WIRE -352 288 -352 176
WIRE -272 288 -352 288
WIRE 16 288 -192 288
WIRE 880 288 880 256
WIRE 2112 288 2112 256
WIRE 976 320 976 256
WIRE 1024 320 976 320
WIRE 1136 320 1136 192
WIRE 1136 320 1104 320
WIRE 1200 320 1136 320
WIRE -96 336 -208 336
WIRE 1200 336 1200 320
WIRE 1232 336 1200 336
WIRE 1424 352 1424 192
WIRE 1424 352 1296 352
WIRE 1520 352 1424 352
WIRE 1712 352 1712 320
WIRE 1712 352 1584 352
WIRE 880 368 880 352
WIRE 1232 368 1200 368
WIRE 1024 384 976 384
WIRE 1200 384 1200 368
WIRE 1200 384 1104 384
WIRE 1712 384 1712 352
WIRE 1264 416 1264 384
WIRE 688 448 544 448
WIRE 880 448 768 448
WIRE 976 448 976 384
WIRE 976 448 880 448
WIRE 880 480 880 448
WIRE 1712 496 1712 464
WIRE 880 560 880 544
WIRE -624 800 -736 800
WIRE 192 800 80 800
WIRE -736 832 -736 800
WIRE 80 832 80 800
WIRE 1280 896 1280 880
WIRE 1280 896 1200 896
WIRE 1280 912 1280 896
WIRE 1200 928 1200 896
WIRE -624 992 -736 992
WIRE 192 992 80 992
WIRE -736 1024 -736 992
WIRE 80 1024 80 992
FLAG -256 0 0
FLAG -256 112 0
FLAG -256 224 0
FLAG -256 336 0
FLAG -704 144 0
FLAG 1280 800 +5V
FLAG 1200 928 0
FLAG 1280 992 -5V
FLAG -96 0 V_0_deg
FLAG -96 112 V_90_deg
FLAG -96 224 V_180_deg
FLAG -96 336 V_270_deg
FLAG -736 912 0
FLAG -624 800 V_0_deg
FLAG -736 1104 0
FLAG -624 992 V_90_deg
FLAG 80 912 0
FLAG 192 800 V_180_deg
FLAG 80 1104 0
FLAG 192 992 V_270_deg
FLAG 16 -48 00
FLAG 16 176 11
FLAG 880 560 0
FLAG 880 368 0
FLAG 16 64 01
FLAG 16 288 10
FLAG 400 240 0
FLAG 400 48 0
FLAG 160 128 11
FLAG 160 -64 00
FLAG 544 448 10
FLAG 544 256 01
FLAG 1264 320 +5V
FLAG 1376 496 0
FLAG 1040 0 +5V
FLAG 1712 496 0
FLAG 1872 272 0
FLAG 1824 176 V_ref
FLAG 1824 -48 0
FLAG 1712 32 ADC0
FLAG 1712 352 ADC1
FLAG 1040 96 0
FLAG 1264 416 0
FLAG 2112 288 0
SYMBOL sw -288 -48 R270
SYMATTR InstName S7
SYMATTR Value MYSW
SYMBOL sw -288 64 R270
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL sw -288 176 R270
SYMATTR InstName S4
SYMATTR Value MYSW
SYMBOL sw -288 288 R270
SYMATTR InstName S6
SYMATTR Value MYSW
SYMBOL voltage -432 128 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 118 56 VBottom 2
WINDOW 39 90 64 VBottom 2
SYMATTR InstName V3
SYMATTR Value SINE(2.5 5u {RF_Freq})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser=50
SYMBOL voltage 1280 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL voltage 1280 896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL voltage -736 816 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage -736 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 {SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage 80 816 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 1 {2*SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL voltage 80 1008 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 1 {3*SW_time} 0.001p 0.001p {SW_time} {4*SW_time})
SYMBOL cap 896 352 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value {C_Sample}
SYMBOL cap 896 544 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value {C_Sample}
SYMBOL res 784 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 1
SYMBOL res 784 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1
SYMBOL cap 416 32 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value {C_Sample}
SYMBOL cap 416 224 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C13
SYMATTR Value {C_Sample}
SYMBOL res 304 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 50
SYMBOL res 304 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 50
SYMBOL res 1328 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 82k
SYMBOL Opamps\\UniversalOpamp2 1264 352 R0
SYMATTR InstName U1
SYMATTR SpiceModel level.1
SYMATTR Value2 Avol=10Meg GBW=50Meg Slew=50Meg
SYMBOL res 1120 304 R90
WINDOW 0 13 112 VBottom 2
WINDOW 3 24 58 VTop 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 1120 368 R90
WINDOW 0 46 3 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res 1104 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 82k
SYMBOL Opamps\\UniversalOpamp2 1040 32 R0
SYMATTR InstName U2
SYMATTR SpiceModel level.1
SYMATTR Value2 Avol=10Meg GBW=50Meg Slew=50Meg
SYMBOL res 896 -16 R90
WINDOW 0 13 112 VBottom 2
WINDOW 3 24 58 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.1
SYMBOL res 896 48 R90
WINDOW 0 46 3 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 0.1
SYMBOL cap 1296 96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1nF
SYMBOL res 1696 -128 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 1696 48 R0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res 1696 224 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 1696 368 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL cap 1856 176 R0
SYMATTR InstName C4
SYMATTR Value 100nF
SYMBOL cap 1504 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 100nF
SYMBOL cap 1584 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100nF
SYMBOL voltage 1824 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0
SYMBOL cap 1072 -240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1nF
SYMBOL res 2064 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL voltage 2112 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 1.1
TEXT -760 384 Left 2 !.model MYSW SW(Vt=0.9 Vh=0 Ron=1 Roff=100G)
TEXT 232 600 Left 2 !.tran 0 2m 40u 1u\n;.ac dec 10 10 1000Meg;\n;.noise V(V_outQ) V3 dec 10 10 100meg\n;.op
TEXT -760 424 Left 2 !.param RF_freq=15Meg LO_freq={RF_freq - Audio_freq} LO_period={1/LO_freq} SW_time={LO_period/4}
TEXT 928 536 Left 2 !.param C_Sample=470nF
TEXT -776 688 Left 4 ;Signals for voltage-controlled switches \nused to simulate our multiplexer.
TEXT 1032 696 Left 4 ;Power Connections
TEXT -576 48 Left 2 ;RF signal in
TEXT -584 -176 Left 4 ;Multiplexer
TEXT 216 544 Left 4 ;Simulation Control
TEXT 232 744 Left 2 !;step dec param Audio_freq 1000 10000000 1
TEXT 232 712 Left 2 !.param Audio_freq=2000
TEXT 1000 448 Left 2 ;R2 and R3 to emulate PE1NNZ
TEXT -152 -304 Left 2 ;Output from inverting alone with R2=0 is: .0.9mV\nOutput from non-inverting input with R2=200 connected to gnd is: 0.9mV\nThe 200 is compensating for there being 50 ohms for 1/4 of the time, and infinity for the rest.\nThe output with both connected is; 1.8mV, so both contribute equally.\nThe output equation is v_o = (1+(41k/50)/4)v+ - ((41k/50)/4)v-  and v- = -v+=5uV\nThis comes out to 2.05mV.  This shows our ideal op amp theory isn't quite dead on, about.
TEXT -760 464 Left 2 ;The filtering is not just due to the sampling capacitors.  It is also due to the op-amps.\nThis simulation has the roll off at almost 40 dB/decade without C2.  \nYou can also see this effect in the peaking at 100 kHz.  C2 removes the peaking,\nand makes it drop faster in the first couple of decades, but then the unity gain\nzero of the non-inverting amplifier takes over, so it only drops at 40 db/decade\nthereafter.
